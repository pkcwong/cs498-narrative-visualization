(this["webpackJsonpcs498-narrative-visualization"]=this["webpackJsonpcs498-narrative-visualization"]||[]).push([[0],{71:function(t,e,n){t.exports=n(80)},76:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(27),i=n.n(o),s=(n(76),n(10)),l=n(6),c=n(2),u=n(3),d=n(9),p=n(4),h=n(5),f=(n(77),n(28)),m=n(1),_=(n(78),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"cartesian"}))}},{key:"componentDidMount",value:function(){this.repaint()}},{key:"componentDidUpdate",value:function(t,e,n){this.repaint()}},{key:"repaint",value:function(){var t=this.props.width,e=this.props.height,n=this.props.dataset;document.getElementById("cartesian").innerHTML="";var a=m.j("#cartesian").append("svg");a.attr("width",t),a.attr("height",e);var r=m.j("body").append("div").attr("class","tooltip").style("opacity",0),o=m.i().domain([-.12,1.12]).range([0,t]),i=m.i().domain([1.12,-.12]).range([0,e]);a.append("g").attr("class","axis").attr("transform","translate(0,"+e/2+")").call(m.b(o)),a.append("g").attr("class","axis").attr("transform","translate("+t/2+",0)").call(m.c(i)),a.append("text").attr("transform","translate(72,"+(e/2-2)+")").style("text-anchor","middle").text("Negative Feedback"),a.append("text").attr("transform","translate("+(t-72)+","+(e/2-2)+")").style("text-anchor","middle").text("Positive Feedback"),a.append("text").attr("transform","translate("+(t/2+16)+",12)").text("Popular"),a.append("text").attr("transform","translate("+(t/2+16)+","+(e-12)+")").text("Unpopular");var s=function(t){return(t.would_use+t.interested)/(t.would_not_use+t.would_use+t.not_interested+t.interested)},l=function(t){return(t.would_not_use+t.would_use)/(t.never_heard+t.interested+t.not_interested+t.would_not_use+t.would_use)};a.append("svg:defs").append("svg:marker").attr("id","triangle").attr("refX",6).attr("refY",6).attr("markerWidth",72).attr("markerHeight",72).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 0 0 12 6 0 12 3 6").style("fill","black"),Object.keys(n).forEach((function(t){var e=function(t){return function(e){var n=[];return["tally2016","tally2017","tally2018","tally2019"].forEach((function(a){0!==t[e][a].would_use&&(n=[].concat(Object(f.a)(n),[{tally:a,opinion:s(t[e][a]),popularity:l(t[e][a])}]))})),n}}(n)(t),c={react:"DeepPink",vuejs:"DeepPink",angular:"DeepPink",ember:"deeppink",express:"DarkSlateBlue",meteor:"DarkSlateBlue",jest:"GoldenRod",mocha:"GoldenRod"},u=a.append("g").append("path"),d=m.g().curve(m.d);d.x((function(t){return o(t.opinion)})),d.y((function(t){return i(t.popularity)})),u.datum(e).attr("stroke",c[t]?c[t]:"black").attr("stroke-width",4).attr("fill","none").attr("d",d),u.attr("marker-end","url(#triangle)");var p=a.append("g").append("text");p.attr("transform","translate("+(o(e[e.length-1].opinion)+12)+","+(i(e[e.length-1].popularity)+-20)+")"),p.text(t);var h=a.append("g").selectAll("circle").data(e).enter().append("circle");h.attr("cx",(function(t){return o(t.opinion)})),h.attr("cy",(function(t){return i(t.popularity)})),h.attr("r",(function(){return 4})),h.on("mouseover",(function(e){r.transition().duration(200).style("opacity",.9),r.html(t+" "+e.tally.substring(5)+" </br>popularity: "+Math.floor(100*e.popularity)+"%</br>opinion: "+Math.floor(100*e.opinion)+"%").style("left",m.f.pageX+"px").style("top",m.f.pageY-24+"px")})),h.on("mouseout",(function(){r.transition().duration(800).style("opacity",0)}))}))}}]),n}(r.a.Component)),v=(n(79),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.framework;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t),r.a.createElement("div",{id:"pie-"+t}))}},{key:"componentDidMount",value:function(){this.repaint()}},{key:"componentDidUpdate",value:function(t,e,n){this.repaint()}},{key:"repaint",value:function(){var t=this.props.width,e=this.props.height,n=this.props.framework,a=this.props.dataset;document.getElementById("pie-"+n).innerHTML="";var r=m.j("#pie-"+n).append("svg");r.attr("width",t),r.attr("height",e);var o=r.append("g");o.attr("transform","translate("+t/2+","+e/2+")"),r.append("g").classed("labels",!0),r.append("g").classed("lines",!0);var i=Math.min(t,e)/6,s=m.h().value((function(t){return t.value})).sort(null)(m.e(a)),l=m.a().innerRadius(0).outerRadius(i),c={would_use:"DarkGreen",interested:"DarkOliveGreen",not_interested:"Brown",would_not_use:"Crimson",never_heard:"DimGrey"},u=o.selectAll("slice").data(s).enter().append("path");u.attr("d",l),u.attr("fill",(function(t){return c[t.data.key]})),u.attr("stroke","black"),u.style("stroke-width","2px"),u.style("opacity",.7);var d=o.selectAll("slice").data(s).enter().append("text");d.text((function(t){return t.endAngle-t.startAngle>.2?t.data.key:""})),d.attr("transform",(function(t){console.log(t);var e=l.centroid(t);return"translate("+3.2*e[0]+","+3.2*e[1]+")"})),d.style("text-anchor","middle"),d.style("font-size",16)}}]),n}(r.a.Component)),g=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(u.a)(n,[{key:"render",value:function(){var t,e,n,a=this.props.width,o=this.props.height,i=this.props.dataset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{width:a,height:o,framework:"react",dataset:null===(t=i.react)||void 0===t?void 0:t.tally2019}),r.a.createElement(v,{width:a,height:o,framework:"express",dataset:null===(e=i.express)||void 0===e?void 0:e.tally2019}),r.a.createElement(v,{width:a,height:o,framework:"jest",dataset:null===(n=i.jest)||void 0===n?void 0:n.tally2019}))}}]),n}(r.a.Component),j=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={screen:{width:0,height:0},"state_of_js_2016_normalized_responses_anon.json":[],"state_of_js_2017_normalized_responses_anon.json":[],"state_of_js_2018_normalized_responses_anon.json":[],"state_of_js_2019_normalized_responses_anon.json":[],dataset:{},page:"Trend"},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(d.a)(a)),a.switchPage=a.switchPage.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:24}},r.a.createElement("h2",null,"Trend of Javascript Web Development Frameworks and Libraries"),r.a.createElement("p",null,r.a.createElement("button",{onClick:this.switchPage("Trend")},"Trend"),r.a.createElement("button",{onClick:this.switchPage("Leaderboard")},"Leaderboard")),"Trend"===this.state.page?r.a.createElement(_,{width:1200,height:800,dataset:this.state.dataset}):void 0,"Leaderboard"===this.state.page?r.a.createElement(g,{width:1200,height:360,dataset:this.state.dataset}):void 0))}},{key:"componentDidMount",value:function(){var t=this;this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions);var e=function(e){return fetch(function(t){return"https://raw.githubusercontent.com/pkcwong/cs498-narrative-visualization/master/data/"+t}(e)).then((function(t){return t.json()})).then((function(n){t.setState(Object(l.a)({},e,n))})).catch((function(t){console.error(t)}))};Promise.all([e("state_of_js_2016_normalized_responses_anon.json"),e("state_of_js_2017_normalized_responses_anon.json"),e("state_of_js_2018_normalized_responses_anon.json"),e("state_of_js_2019_normalized_responses_anon.json")]).then((function(){var e={would_use:2,interested:1,never_heard:0,not_interested:-1,would_not_use:-2},n=function(t,e){return function(n){return t.map((function(t){var e,a;return null===(e=t.tools)||void 0===e||null===(a=e[n])||void 0===a?void 0:a.experience})).reduce((function(t,e){return e?Object(s.a)({},t,Object(l.a)({},e,t[e]+1)):t}),Object.keys(e).reduce((function(t,e){return Object(s.a)({},t,Object(l.a)({},e,0))}),{}))}},a={tally2016:n(t.state["state_of_js_2016_normalized_responses_anon.json"],e),tally2017:n(t.state["state_of_js_2017_normalized_responses_anon.json"],e),tally2018:n(t.state["state_of_js_2018_normalized_responses_anon.json"],e),tally2019:n(t.state["state_of_js_2019_normalized_responses_anon.json"],e)},r=["react","vuejs","angular","ember","express","meteor","jest","mocha"].reduce((function(t,e){return Object(s.a)({},t,Object(l.a)({},e,Object.keys(a).reduce((function(t,n){return Object(s.a)({},t,Object(l.a)({},n,a[n](e)))}),{})))}),{});t.setState({dataset:r})})).catch((function(t){console.error(t)}))}},{key:"updateWindowDimensions",value:function(){this.setState({screen:{width:window.innerWidth,height:window.innerHeight}})}},{key:"switchPage",value:function(t){var e=this;return function(){e.setState({page:t},(function(){e.forceUpdate()}))}}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.8a63a591.chunk.js.map